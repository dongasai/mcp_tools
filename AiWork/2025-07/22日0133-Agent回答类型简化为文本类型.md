# Agent回答类型简化为文本类型

## 任务背景
根据需求，需要将 AgentQuestion 模型的回答类型从多种类型（TEXT、CHOICE、JSON、FILE）简化为仅支持文本类型。

## 执行时间
2025-07-22 01:33 (UTC+8)

## 修改内容

### 1. 核心模型修改
**文件**: `app/Modules/Agent/Models/AgentQuestion.php`
- 移除了多余的回答类型常量：
  - `ANSWER_TYPE_CHOICE`
  - `ANSWER_TYPE_JSON`
  - `ANSWER_TYPE_FILE`
- 仅保留：`const ANSWER_TYPE_TEXT = 'TEXT'`

### 2. 控制器更新
**文件**: `app/Admin/Controllers/QuestionController.php`
**文件**: `app/UserAdmin/Controllers/QuestionController.php`
- 移除了回答类型选择表单字段
- 简化了问题创建和编辑表单

### 3. 动作类更新
**文件**: `app/UserAdmin/Actions/Question/AnswerQuestionAction.php`
**文件**: `app/UserAdmin/Actions/Question/Answer2QuestionAction.php`
- 移除了回答选项相关的逻辑
- 简化了回答处理流程

### 4. 测试文件更新
**文件**: `tests/Unit/Agent/QuestionServiceTest.php`
**文件**: `app/Modules/Agent/Controllers/QuestionTestController.php`
- 移除了问题类型相关的测试用例
- 更新了测试数据

### 5. 工厂文件更新
**文件**: `database/factories/AgentQuestionFactory.php`
- 移除了问题类型和回答选项的工厂定义
- 简化了问题创建逻辑

### 6. MCP工具更新
**文件**: `app/Modules/Mcp/Tools/AskQuestionTool.php`
- 移除了 `question_type` 和 `answer_options` 参数
- 简化了问题创建接口

**文件**: `app/Modules/Mcp/Tools/GetQuestionsTool.php`
- 移除了 `question_type` 过滤参数
- 移除了返回数据中的问题类型相关字段

## 影响范围
- 所有问题现在统一使用文本回答
- 简化了用户界面和API接口
- 减少了代码复杂度和维护成本

## 验证结果
- 所有相关文件已同步更新
- 系统功能测试通过
- 符合需求规范要求

## 后续建议
- 监控用户使用情况，确保文本回答满足需求
- 如有需要，可考虑在未来版本中添加富文本支持